<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Ling Yan Hao - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">REstaurant Manager</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/cs2103-ay1819S2-w11-2/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Ling Yan Hao - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-restaurant-manager"><a class="link" href="#project-restaurant-manager">PROJECT: REstaurant Manager</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This portfolio serves to illustrate my contributions to the project REstaurant Manager (REM). REM is a CS2103T project meant for new developers to gain a hands-on experience at software engineering. REM is a desktop application meant for restaurant owners to manage their members, staff, bookings and food inventory.</p>
</div>
<div class="paragraph">
<p>As a developer, I was primarily in charged of the booking feature which involved the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add, delete and edit bookings from the system</p>
</li>
<li>
<p>Suggest alternative timings if user tries to add a booking when restaurant is fully booked</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As the overall team leader, I was responsible for setting clear goals and directions for the team and listening to teammates' feedback for suggestions. I also ensured that the tasks were done on time and complied with the module requirements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of Contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Code contributed: [<a href="https://nus-cs2103-ay1819s2.github.io/cs2103-dashboard/#search=lingyanhao&amp;sort=displayName&amp;since=2019-02-10&amp;until=2019-03-25&amp;timeframe=day&amp;reverse=false&amp;repoSort=true">Code</a>]</p>
</li>
<li>
<p><strong>Major enhancement</strong>: added <strong>booking feature</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to manage bookings. The system will reject new bookings and suggest better alternative timeslots if the restaurant is full.</p>
</li>
<li>
<p>Justification: When a restaurant needs to manage a large number of bookings, it can be difficult for owners to keep track of how many people are in the restaurant at each point in time. Having a system that rejects new bookings when the restaurant is full can help prevent overbooking. If the user tries to enter a booking when the restaurant is full, not only is the booking rejected, an alternative booking timeslot is also suggested.</p>
</li>
<li>
<p>Highlights: This feature affects the existing delete and edit commands for members as changing a member&#8217;s personal details requires a corresponding update in the booking panel. It required a significant restructuring of the <code>Model</code> component from AB4.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments): [<a href="https://github.com/cs2103-ay1819S2-w11-2/main/pull/110" class="bare">https://github.com/cs2103-ay1819S2-w11-2/main/pull/110</a>], [<a href="https://github.com/cs2103-ay1819S2-w11-2/main/pull/138" class="bare">https://github.com/cs2103-ay1819S2-w11-2/main/pull/138</a>]</p>
</li>
<li>
<p>Reported bugs for other teams: [<a href="https://github.com/CS2103-AY1819S2-W14-3/main/issues/309" class="bare">https://github.com/CS2103-AY1819S2-W14-3/main/issues/309</a>], [<a href="https://github.com/CS2103-AY1819S2-W14-3/main/issues/308" class="bare">https://github.com/CS2103-AY1819S2-W14-3/main/issues/308</a>]</p>
</li>
</ul>
</div>
</li>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed release v1.1 on GitHub</p>
</li>
<li>
<p>Setup organisation/team repo</p>
</li>
<li>
<p>Setup Travis CI, Appveyor and Coveralls and Codacy</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>This section shows some samples of sections I contributed to the user guide. It shows my ability to write friendly documentation for end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="booking-management"><a class="link" href="#booking-management">Booking Management</a></h3>
<div class="paragraph">
<p>The booking section models booking made by members.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A booking consists of a member, a start time and an integer representing the number of persons coming to the restaurant.</p>
</li>
<li>
<p>In this section, <code>TIME</code> parameters follow the yyyy-MM-ddTHH:mm (e.g. <code>2019-02-23T13:00</code> means 23 Feb 2019, 1300 hrs) or HH:mm (e.g. <code>12:00</code>) format. If the HH:mm format is used, the date is automatically chosen to be the current date at the point of command execution.</p>
</li>
<li>
<p>For the exact specification of what date and time formats are allowed, please refer to the <code>LocalDateTime</code> and <code>LocalTime</code> class in Java.</p>
</li>
<li>
<p>In order to ensure that the restaurant does not get overbooked, REM allows you to adjust the restaurant capacity. This capacity indicates the maximum number of customers that can be present in the restaurant at any given time. REM assumes that customers stay in the restaurant for 1 hour before leaving, although the end time is not displayed on screen.</p>
</li>
<li>
<p>REM does not allow non-members to make bookings and every booking must correspond to a single member. If this member is deleted, all bookings made by the member will also be deleted.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="list-booking-code-listbookings-code-coming-in-v2-0"><a class="link" href="#list-booking-code-listbookings-code-coming-in-v2-0">List Booking: <code>listBookings</code> [Coming in v2.0]</a></h4>
<div class="paragraph">
<p>View the current lists of bookings within a certain time frame</p>
</div>
<div class="paragraph">
<p>Format: <code>listBookings [ts/TIME_START] [te/TIME_END]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The start and end times are optional arguments. If not specified, the list of all bookings (i.e. including future and past bookings) made so far will be displayed.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>listBookings ts/2019-03-01 12:00 te/2019-03-04 15:00</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="update-restaurant-capacity-code-updatecapacity-code"><a class="link" href="#update-restaurant-capacity-code-updatecapacity-code">Update Restaurant Capacity: <code>updateCapacity</code></a></h4>
<div class="paragraph">
<p>Want to ensure that your restaurant does not get overbooked? Make sure to update the capacity of the restaurant accordingly.</p>
</div>
<div class="paragraph">
<p>Format: <code>updateCapacity NUMBER</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The default capacity of the restaurant is 200.</p>
</li>
<li>
<p>If the capacity is full, the restaurant will not accept new bookings (refer to <a href="#Create New Booking: <code>addBooking</code>">addBooking command </a>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>updateCapacity 50</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This updates the restaurants to cater for a capacity of 50 customers. If any operation results in having more than 50 customers at any point in time, REM will show an error message indicating that the restaurant is full (unless the <code>updateCapacity</code> command is used again).</p>
</div>
</div>
<div class="sect3">
<h4 id="add-new-booking-code-addbooking-code"><a class="link" href="#add-new-booking-code-addbooking-code">Add New Booking: <code>addBooking</code></a></h4>
<div class="paragraph">
<p>Creates a new booking.</p>
</div>
<div class="paragraph">
<p>Format: <code>addBooking c/CUSTOMER_INDEX n/NUMBER OF PERSONS ts/TIME_START</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>All bookings will last for 1 hour, although the end time is not shown in the UI.</p>
</li>
<li>
<p>Customer INDEX refers to the index of the customer as displayed by the list.</p>
</li>
<li>
<p>Bookings are a privileged feature restricted only to members. REM does not allow non-members to make bookings.</p>
</li>
<li>
<p>If the booking is rejected due to capacity constraints, a message will appear suggesting an alternative timeslot. This timeslot is the earliest timeslot after the input date and time that can be accepted. Note that this does not automatically add the booking into REM- a separate <code>addBooking</code> command needs to be entered to accept the newly suggested timeslot.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Example (execute these commands in the order listed with no other commands inserted in between, starting with a list of at least 2 members and an initially empty list of bookings):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>updateCapacity 10</code> (updates the restaurant capacity to 10)</p>
</li>
<li>
<p><code>addBooking c/1 n/7 ts/2019-04-07T12:00</code> (adds a booking for the first customer on the current list, on 7 Apr, at 1200 hrs)</p>
</li>
<li>
<p><code>addbooking c/2 n/7 ts/2019-04-07T11:30</code> (adds a booking for the second customer on the current list, on 7 Apr, at 1200 hrs)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command will fail to execute. As bookings last for 1 hour, accepting this command will cause the restaurant to exceed the capacity of 10 customers at 2019-04-07T12:00 (in fact, 7+7=14 customers will be present if this command executes). Thus this booking is rejected.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/capacityexplanation.png" alt="capacityexplanation" width="800">
</div>
<div class="title">Figure 1. A pictorial representation showing why the capacity will be exceeded</div>
</div>
<div class="paragraph">
<p>The user may also notice that an alternative booking time of 2019-04-07T13:00 is suggested by REM. The suggested booking time is the next available slot after the input time (in this case, 2019-04-07T11:30) that can hold the booking of 7 members. In this case, the restaurant is only free at 2019-04-07T13:00 after the previous group of 7 customers leave (recall that bookings last for 1 hour).</p>
</div>
<div class="paragraph">
<p>The below screenshot shows what happens:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/altbookingtime.png" alt="altbookingtime" width="800">
</div>
</div>
</div>
<div class="sect3">
<h4 id="edit-booking-code-editbooking-code"><a class="link" href="#edit-booking-code-editbooking-code">Edit Booking: <code>editBooking</code></a></h4>
<div class="paragraph">
<p>Edits a booking by changing either the time, number of persons of both.</p>
</div>
<div class="paragraph">
<p>Format: <code>editBooking INDEX [ts/TIME_START] [n/NUMBER_OF_PERSONS]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Edits the booking at the specified <code>INDEX</code>. The index refers to the index number shown in the most recent listing. REM will not execute this operation if this causes capacity to be exceeded.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>*<code>editBooking 3 ts/12:00 n/6</code></p>
</div>
<div class="paragraph">
<p>Edits the booking at index 3, changing the booking time to 12:00 for 6 persons. Since the date was unspecified, the current date (at the point of entering the command) will be used.</p>
</div>
<div class="paragraph">
<p>*<code>editBooking 4 ts/2019-03-30T17:00</code></p>
</div>
<div class="paragraph">
<p>Edits the booking at index 4, changing the booking time to 30 March 2019, 12:00. The number of persons remains unchanged as it was previously unspecified.</p>
</div>
</div>
<div class="sect3">
<h4 id="delete-booking-code-deletebooking-code"><a class="link" href="#delete-booking-code-deletebooking-code">Delete Booking: <code>deleteBooking</code></a></h4>
<div class="paragraph">
<p>Deletes a booking.</p>
</div>
<div class="paragraph">
<p>Format: <code>deleteBooking INDEX</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Deletes the booking at the specified <code>INDEX</code>. The index refers to the index number shown in the most recent listing.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>deleteBooking 3</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Deletes the booking with index 3.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>This section shows some sample of sections I contributed to the developer guide. It shows my ability to write technical documentation for potential developers who may wish to take over the software.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="data-structure-for-holding-records"><a class="link" href="#data-structure-for-holding-records">Data structure for holding records</a></h3>
<div class="paragraph">
<p>Following the AB4 structure, the <code>RestaurantBook</code> (originally <code>AddressBook</code>) class serves as the main database, holding information of all records in the system. However, the database system required is more complicated than the one in AB4- there are four different kinds of records that need to be stored. The main operations are still largely CRUD (create, read, update, delete) in nature which are very similarly done. However, there are some differences between the types of records:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some commands such as <code>addBooking</code> needs to keep track of the <code>Capacity</code> of the restaurant- we must not allow the restaurant to be overbooked. There is no equivalent of this in the <code>addMember</code>, <code>addIngredient</code> or <code>addStaff</code> commands.</p>
</li>
<li>
<p>The <code>editMember</code> command requires all <code>Booking</code> associated to the <code>Member</code> to have an updated copy of all the <code>Member</code> details. Again, there is no equivalent of this in the other edit-style commands.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current implementation</a></h4>
<div class="paragraph">
<p>We created the interface <code>Item</code> to represent a record. A <code>UniqueItemList</code> was used to handle the bulk of the CRUD logic, much like the way the <code>UniquePersonList</code> in the original AB4 was used to handle the CRUD logic. As the <code>Staff</code> and <code>Member</code> class store common attributes (<code>Name</code>, <code>Phone</code>, <code>Email</code>), an abstract class <code>Person</code> was used to capture this. However, in the <code>Model</code> interface, the methods are kept separate (using methods like <code>addMember</code>, <code>addBooking</code> instead of having a more generic <code>addItem</code> method).</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-implementation-of-data-structure"><a class="link" href="#aspect-implementation-of-data-structure">Aspect: Implementation of data structure</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Use the <code>Item</code> interface to capture the similarity between records.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Reduces code duplication as we do not need separate classes <code>UniqueMemberList</code>, <code>UniqueBookingList</code>, <code>UniqueIngredientList</code>, <code>UniqueStaffList</code>.</p>
</li>
<li>
<p>Cons: As the operations for different records are not exactly the same, RestaurantBook needs to be aware of the differences between the similar operations.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Create four separate classes which do not inherit from any parent class or interface.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The precise CRUD operations can be heavily customised for each type of record.</p>
</li>
<li>
<p>Cons: Lots of code duplication.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Decision: Alternative 1 was adopted as the differences between the operations are relatively minor and can be done at the <code>RestaurantBook</code> level without creating too much confusion.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-implementation-of-the-model-interface"><a class="link" href="#aspect-implementation-of-the-model-interface">Aspect: Implementation of the model interface</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Maintain separate methods for the similar-looking CRUD-style methods</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easier to implement.</p>
</li>
<li>
<p>Cons: More code duplication, the <code>Model</code> API now contains many methods.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Generalize the methods so that there is only one of them for each type of command (e.g. <code>addItem</code> instead of <code>addBooking</code>, <code>addMember</code>) in the Model API.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Reduces the overall amount of code needed with less duplication. The <code>Model</code> API looks simpler on the surface with less methods.</p>
</li>
<li>
<p>Cons: Violates Separation of Concerns principle, due to the differences across the similar-looking methods. Since the implementation of various <code>add</code> commands are slightly different (<code>addBooking</code> needs to check the restaurant capacity first), many if-else statements will be required in the control flow of <code>RestaurantBook#addItem</code> method, potentially using <code>instanceof</code> checks. These <code>instanceof</code> checks can potentially violate type safety.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Decision: Alternative 1 was adopted as we value simplicity over the potential problems that might arise with the generic methods.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-code-editmember-code-command"><a class="link" href="#the-code-editmember-code-command">The <code>editMember</code> command</a></h3>
<div class="paragraph">
<p>When a <code>Member</code> details (<code>Name</code>, <code>Phone</code>, or <code>Email</code>) is changed, the <code>Booking</code> object must reflect the change. This requires an internal modification to the <code>Booking</code> objects in some way.</p>
</div>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current implementation</a></h4>
<div class="paragraph">
<p>When <code>RestaurantBook#setMember()</code> is called, the bookings are replaced with a new set of bookings. If an existing booking contains the modified member, the member will be replaced with a new <code>Booking</code> object that containing the updated member.</p>
</div>
</div>
<div class="sect3">
<h4 id="proposed-implementation"><a class="link" href="#proposed-implementation">Proposed implementation</a></h4>
<div class="paragraph">
<p>Each member is assigned an ID. Along with this, maintain a master list of ID to <code>Member</code> mappings. The <code>Booking</code> class only keep tracks of the <code>Member</code> s id, calling the <code>MasterMemberList</code> to obtain the <code>Member</code> object when necessary. The following (simplified) class diagram demonstrates the associations between <code>Booking</code>, <code>MasterMemberList</code> and <code>Member</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/editmemberclassdiagram.png" alt="editmemberclassdiagram" width="800">
</div>
<div class="title">Figure 2. A class diagram showing the proposed implementation of managing the <code>Booking</code> and <code>Member</code> dependencies. This diagram is heavily simplified as unrelated methods and attributes are not shown.</div>
</div>
<div class="paragraph">
<p>This proposed implementation simplifies the execution of the <code>editMember</code> command. The interactions between the various components of the proposed sequence diagram can be represented as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/editmembersequencediagram.png" alt="editmembersequencediagram" width="800">
</div>
<div class="title">Figure 3. A sequence diagram showing the proposed implementation of the <code>editMember</code> command. For simplicity, we do not show the <code>Logic</code> component and we only focus on the <code>Model</code> component.</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Manually perform a corresponding change to the <code>Booking</code> list whenever the personal details of a member changes.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easier to implement as it does not require much change to the already-existing AB4 codebase.</p>
</li>
<li>
<p>Cons: Poor efficiency. This involves scanning through the entire list of bookings just to change the personal details of a single <code>Member</code>. Also, if some other command changes a <code>Member</code> details without going through the <code>RestaurantBook#setMember()</code> method, the update will not be reflected.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Make the <code>Member</code> class mutable. Whenever the <code>Member</code> details changes, the <code>Booking</code> will automatically extract the correct details of the <code>Member</code> and nothing needs to be done.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: This eases the load on the <code>RestaurantBook</code> class and does not require special treatment. It is also more efficient as no additional work is done.</p>
</li>
<li>
<p>Cons: The current <code>undo</code> and <code>redo</code> commands rely on the immutabilty of the <code>Member</code> class to work correctly. Doing so may require a huge change in implementation of <code>undo</code> and <code>redo</code> commands. Also, allowing mutable variables can potentially be a source of other bugs.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 3 (proposed) :</strong> Assign each <code>Member</code> an ID and store the mapping from ID to <code>Member</code>. Instead of storing the full details of the <code>Member</code>, the <code>Booking</code> object simply stores the <code>ID</code> of the member that made the booking. When an update occurs, we simply need to update the ID to <code>Member</code> map.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: The <code>RestaurantBook#setMember()</code> method does not depend on the <code>Booking</code> class, reducing coupling and dependency. The execution of the <code>editMember</code> command only changes <code>Member</code> objects without changing <code>Booking</code> objects.</p>
</li>
<li>
<p>Cons: Uses additional data structure to store the mappings and requires significantly more code changes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Decision: Alternative 1 was adopted as we felt that it was the simplest way to implement the feature, requiring minimal code changes to the existing codebase. However, we feel that alternative 3 is a better implementation but did not adopt it due to time constraints.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="suggesting-alternative-booking-timeslots"><a class="link" href="#suggesting-alternative-booking-timeslots">Suggesting alternative booking timeslots</a></h3>
<div class="paragraph">
<p>REM does not allow additional bookings to be added into the system if this causes the capacity to be exceeded. Instead of displaying a message saying that the restaurant is full, we want to suggest an alternative timing to the user instead. In order to achieve this, REM calculates the earliest timeslot after the input date and time that can be accepted.</p>
</div>
<div class="sect3">
<h4 id="current-implementation-3"><a class="link" href="#current-implementation-3">Current implementation</a></h4>
<div class="paragraph">
<p>All calculations involving the restaurant capacity is done in the <code>Capacity</code> class. In particular, the following related methods are implemented:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Capacity#canAccomodate(List&lt;Booking&gt; bookings)</code>&#8201;&#8212;&#8201;Checks if the capacity is sufficient to hold the bookings.</p>
</li>
<li>
<p><code>Capacity#canAddBooking(Booking toAdd, List&lt;Booking&gt; existingBookings)</code>&#8201;&#8212;&#8201;Checks if the booking list stays within capacity after adding the booking. Guarantees immutability of <code>existingBookings</code>.</p>
</li>
<li>
<p><code>Capacity#suggestNextAvailableTime(Booking toAdd, List&lt;Booking&gt; existingBookings)</code>&#8201;&#8212;&#8201;The next available time that the restaurant can accommodate the booking, subjected to the constraint that the returned time must occur after <code>toAdd</code>. In other words, suggestion always shifts the booking later and never earlier.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this document, we will focus on the implementation of <code>suggestNextAvailableTime</code>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The program first check that the input satisfies the preconditions of the method which are required for the method to return a meaningful answer. These are pre-conditions:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The number of persons of the booking cannot exceed the capacity value (if my restaurant can only seat 20 people, I will never be able to make space for a booking of 30).</p>
</li>
<li>
<p><code>existingBookings</code> must fit within the capacity (if this condition is violated, it is impossible to add a new booking in a way that fits within capacity).</p>
</li>
</ol>
</div>
</li>
<li>
<p>The program then checks if the current booking can be accepted. If yes, the start time of the booking is returned and no further computations needs to be done.</p>
</li>
<li>
<p>As the final answer must correspond to a customer leaving (the best time for a customer to arrive is when another customer leaves), the set of all end times among the existing bookings are generated and sorted in chronological order. This is the list of all the potential answers.</p>
</li>
<li>
<p>For each possible answer, these two conditions are checked:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The returned time must be later than the start time of the incoming booking.</p>
</li>
<li>
<p>The incoming booking <code>toAdd</code> must fit within the capacity (as determined by <code>canAddBooking</code> method) after the time is modified accordingly.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If both conditions pass, the end time of the booking is successfully returned. The pre-conditions in Step 1 ensures that at least one of the end times is valid. Since the list is sorted, only the earliest one will be returned (i.e. it is impossible to run through the loop without returning an answer).
The current implementation can be described by the following activity diagram:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/suggesttimeslot.png" alt="suggesttimeslot" width="800">
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-04-14 03:08:11 UTC</div></div></div></body></html>